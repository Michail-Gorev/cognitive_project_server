
# Серверная часть приложения: Когнитивные тесты (Django)

Этот репозиторий содержит серверную часть проекта, реализованную на Django. Серверная часть отвечает за обработку запросов от фронтенд-приложения, хранение данных пользователей, результатов тестов и управление попытками прохождения тестов.

## Основные функции

- **Регистрация и авторизация пользователей**: Пользователи могут зарегистрироваться и войти в систему.
- **Сохранение результатов тестов**: Результаты прохождения тестов сохраняются в базе данных.
- **Управление попытками**: Учёт количества попыток прохождения тестов для каждого пользователя.
- **Экспорт данных**: Администраторы могут экспортировать данные пользователей и результаты тестов в форматах CSV и XLSX.

## Структура проекта

### Модели
- **User**: Модель для хранения данных пользователей.
- **TestNSI**: Модель для хранения информации о тестах.
- **TestResult**: Модель для хранения результатов тестов.
- **Attempt**: Модель для учёта попыток прохождения тестов.

### API
- **Регистрация пользователя**: `POST /api/register/`
- **Авторизация пользователя**: `POST /api/login/`
- **Сохранение результатов теста**: `POST /api/save_test_result/`
- **Обновление попыток**: `POST /api/update_attempt/`
- **Получение попыток**: `GET /api/get_attempt/`

### Админка
- **UserAdmin**: Управление пользователями с возможностью экспорта данных в CSV и XLSX.
- **TestNSIAdmin**: Управление тестами с возможностью экспорта данных.
- **TestResultAdmin**: Управление результатами тестов с возможностью экспорта данных.
- **AttemptAdmin**: Управление попытками прохождения тестов.

## Установка и запуск

1. Убедитесь, что у вас установлены Python 3.x и Django.
2. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/ваш-репозиторий.git
   ```
3. Перейдите в директорию проекта:
   ```bash
   cd ваш-проект
   ```
4. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
5. Примените миграции:
   ```bash
   python manage.py migrate
   ```
6. Создайте суперпользователя:
   ```bash
   python manage.py createsuperuser
   ```
7. Запустите сервер:
   ```bash
   python manage.py runserver
   ```

## Использование API

### Регистрация пользователя
- **Метод**: `POST`
- **URL**: `/api/register/`
- **Тело запроса**:
  ```json
  {
    "username": "имя_пользователя",
    "password": "пароль",
    "age": 25,
    "education": "высшее",
    "speciality": "программист",
    "residence": "Москва",
    "height": 180,
    "weight": 75,
    "lead_hand": "правая",
    "diseases": "нет",
    "smoking": "нет",
    "alcohol": "иногда",
    "sport": "регулярно",
    "insomnia": "редко",
    "current_health": "хорошее",
    "gaming": "да"
  }
  ```

### Авторизация пользователя
- **Метод**: `POST`
- **URL**: `/api/login/`
- **Тело запроса**:
  ```json
  {
    "username": "имя_пользователя",
    "password": "пароль"
  }
  ```

### Сохранение результатов теста
- **Метод**: `POST`
- **URL**: `/api/save_test_result/`
- **Тело запроса**:
  ```json
  {
    "test": 1,
    "user": 1,
    "try_number": 1,
    "number_all_answers": 10,
    "number_correct_answers": 8,
    "complete_time": "00:05:30",
    "accuracy": 80.0
  }
  ```

### Обновление попыток
- **Метод**: `POST`
- **URL**: `/api/update_attempt/`
- **Тело запроса**:
  ```json
  {
    "user_id": 1,
    "test_id": 1
  }
  ```

### Получение попыток
- **Метод**: `GET`
- **URL**: `/api/get_attempt/?user_id=1&test_id=1`

## Админка

Админка доступна по адресу `/admin/`. Для входа используйте учётные данные суперпользователя.

### Экспорт данных
Администраторы могут экспортировать данные пользователей, тестов и результатов тестов в форматах CSV и XLSX. Для этого:
1. Перейдите в раздел админки (например, "Users").
2. Выберите нужные записи.
3. В выпадающем меню "Action" выберите "Export Selected as CSV" или "Export Selected as XLSX".

## Лицензия

Этот проект распространяется под лицензией MIT. Подробности см. в файле [LICENSE](LICENSE).

---
